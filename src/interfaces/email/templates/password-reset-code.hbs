<!-- src/interfaces/email/templates/password-reset-code.hbs -->

<!-- Encabezado de seguridad -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td style="padding-bottom: 30px;" align="center">
            <h2 style="
                margin: 0 0 10px 0;
                padding: 0;
                font-family: Arial, sans-serif;
                font-size: 28px;
                font-weight: bold;
                color: #dc3545;
                text-align: center;
            ">
                üîê C√≥digo de recuperaci√≥n
            </h2>
            
            <p style="
                margin: 0;
                padding: 0;
                font-family: Arial, sans-serif;
                font-size: 16px;
                color: #6c757d;
                line-height: 24px;
                text-align: center;
            ">
                C√≥digo para restablecer tu contrase√±a en {{appName}}
            </p>
        </td>
    </tr>
</table>

<!-- Saludo personalizado -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td style="padding-bottom: 20px;">
            <p style="
                margin: 0;
                padding: 0;
                font-family: Arial, sans-serif;
                font-size: 16px;
                color: #333333;
                line-height: 24px;
            ">
                Hola {{#if firstName}}{{firstName}}{{else}}usuario{{/if}},
            </p>
        </td>
    </tr>
</table>

<!-- Mensaje principal -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td style="padding-bottom: 25px;">
            <p style="
                margin: 0 0 15px 0;
                padding: 0;
                font-family: Arial, sans-serif;
                font-size: 16px;
                color: #333333;
                line-height: 24px;
            ">
                Hemos recibido una solicitud para restablecer la contrase√±a de tu cuenta en <strong>{{appName}}</strong>.
            </p>
            
            <p style="
                margin: 0;
                padding: 0;
                font-family: Arial, sans-serif;
                font-size: 16px;
                color: #333333;
                line-height: 24px;
            ">
                Si fuiste t√∫ quien solicit√≥ este cambio, puedes usar el c√≥digo de seguridad que encontrar√°s m√°s abajo.
            </p>
        </td>
    </tr>
</table>

<!-- Informaci√≥n de la solicitud -->
{{#if requestInfo}}
<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td style="padding-bottom: 25px;">
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tr>
                    <td style="
                        background-color: #f8f9fa;
                        border: 1px solid #e9ecef;
                        border-radius: 6px;
                        padding: 15px 20px;
                    ">
                        <h4 style="
                            margin: 0 0 10px 0;
                            padding: 0;
                            font-family: Arial, sans-serif;
                            font-size: 16px;
                            font-weight: bold;
                            color: #495057;
                        ">
                            üìã Detalles de la solicitud
                        </h4>
                        
                        <table border="0" cellpadding="0" cellspacing="0" width="100%">
                            {{#if requestInfo.email}}
                            <tr>
                                <td style="padding: 3px 0; width: 120px;">
                                    <strong style="
                                        font-family: Arial, sans-serif;
                                        font-size: 13px;
                                        color: #6c757d;
                                    ">Cuenta:</strong>
                                </td>
                                <td style="padding: 3px 0;">
                                    <span style="
                                        font-family: Arial, sans-serif;
                                        font-size: 13px;
                                        color: #333333;
                                    ">{{requestInfo.email}}</span>
                                </td>
                            </tr>
                            {{/if}}
                            
                            {{#if requestInfo.requestTime}}
                            <tr>
                                <td style="padding: 3px 0;">
                                    <strong style="
                                        font-family: Arial, sans-serif;
                                        font-size: 13px;
                                        color: #6c757d;
                                    ">Fecha y hora:</strong>
                                </td>
                                <td style="padding: 3px 0;">
                                    <span style="
                                        font-family: Arial, sans-serif;
                                        font-size: 13px;
                                        color: #333333;
                                    ">{{requestInfo.requestTime}}</span>
                                </td>
                            </tr>
                            {{/if}}
                            
                            {{#if requestInfo.ipAddress}}
                            <tr>
                                <td style="padding: 3px 0;">
                                    <strong style="
                                        font-family: Arial, sans-serif;
                                        font-size: 13px;
                                        color: #6c757d;
                                    ">Direcci√≥n IP:</strong>
                                </td>
                                <td style="padding: 3px 0;">
                                    <span style="
                                        font-family: Arial, sans-serif;
                                        font-size: 13px;
                                        color: #333333;
                                    ">{{requestInfo.ipAddress}}</span>
                                </td>
                            </tr>
                            {{/if}}
                        </table>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
{{/if}}

<!-- C√≥digo de restablecimiento -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td style="padding: 30px 0;" align="center">
            <p style="
                margin: 0 0 20px 0;
                padding: 0;
                font-family: Arial, sans-serif;
                font-size: 18px;
                color: #333333;
                text-align: center;
                font-weight: bold;
            ">
                Tu c√≥digo de recuperaci√≥n es:
            </p>
            
            <!-- C√≥digo de restablecimiento destacado -->
            <table border="0" cellpadding="0" cellspacing="0" style="margin: 20px auto;">
                <tr>
                    <td style="
                        background-color: #fff5f5;
                        border: 3px dashed #dc3545;
                        border-radius: 15px;
                        padding: 25px 35px;
                        text-align: center;
                        box-shadow: 0 4px 8px rgba(220, 53, 69, 0.1);
                    ">
                        <p style="
                            margin: 0;
                            padding: 0;
                            font-family: 'Courier New', monospace;
                            font-size: 36px;
                            font-weight: bold;
                            color: #dc3545;
                            letter-spacing: 8px;
                            text-align: center;
                        ">
                            {{resetCode}}
                        </p>
                    </td>
                </tr>
            </table>
            
            <p style="
                margin: 20px 0 0 0;
                padding: 0;
                font-family: Arial, sans-serif;
                font-size: 14px;
                color: #6c757d;
                text-align: center;
                line-height: 20px;
            ">
                Ingresa este c√≥digo en la aplicaci√≥n para restablecer tu contrase√±a.
            </p>
            
            <!-- Instrucciones paso a paso -->
            <table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin-top: 25px;">
                <tr>
                    <td style="
                        background-color: #e3f2fd;
                        border-left: 4px solid #2196f3;
                        padding: 15px 20px;
                        border-radius: 4px;
                    ">
                        <h5 style="
                            margin: 0 0 10px 0;
                            padding: 0;
                            font-family: Arial, sans-serif;
                            font-size: 14px;
                            font-weight: bold;
                            color: #0d47a1;
                        ">
                            üì± C√≥mo usar el c√≥digo:
                        </h5>
                        
                        <ol style="
                            margin: 0;
                            padding: 0 0 0 20px;
                            font-family: Arial, sans-serif;
                            font-size: 13px;
                            color: #1565c0;
                            line-height: 18px;
                        ">
                            <li style="margin-bottom: 5px;">Ve a la p√°gina de recuperaci√≥n de contrase√±a</li>
                            <li style="margin-bottom: 5px;">Ingresa este c√≥digo en el campo correspondiente</li>
                            <li style="margin-bottom: 5px;">Crea tu nueva contrase√±a segura</li>
                            <li>¬°Listo! Ya puedes acceder con tu nueva contrase√±a</li>
                        </ol>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<!-- Informaci√≥n de expiraci√≥n -->
{{#if expirationTime}}
<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td style="padding: 20px 0;">
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tr>
                    <td style="
                        background-color: #fff3cd;
                        border-left: 4px solid #ffc107;
                        padding: 15px 20px;
                        border-radius: 4px;
                    ">
                        <p style="
                            margin: 0;
                            padding: 0;
                            font-family: Arial, sans-serif;
                            font-size: 14px;
                            color: #856404;
                            font-weight: 500;
                            line-height: 20px;
                        ">
                            ‚è∞ <strong>Importante:</strong> Este c√≥digo expirar√° en <strong>{{expirationTime}}</strong>. 
                            Si no restableces tu contrase√±a dentro de este tiempo, tendr√°s que solicitar un nuevo c√≥digo.
                        </p>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
{{/if}}

<!-- Consejos de seguridad para el c√≥digo -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td style="padding: 25px 0;">
            <h3 style="
                margin: 0 0 15px 0;
                padding: 0;
                font-family: Arial, sans-serif;
                font-size: 18px;
                font-weight: bold;
                color: #2c3e50;
            ">
                üõ°Ô∏è Consejos de seguridad
            </h3>
            
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tr>
                    <td style="padding: 8px 0;">
                        <table border="0" cellpadding="0" cellspacing="0" width="100%">
                            <tr>
                                <td style="width: 20px; vertical-align: top; padding-right: 10px;">
                                    <span style="font-size: 14px;">‚ö†Ô∏è</span>
                                </td>
                                <td style="vertical-align: top;">
                                    <p style="
                                        margin: 0;
                                        padding: 0;
                                        font-family: Arial, sans-serif;
                                        font-size: 14px;
                                        color: #333333;
                                        line-height: 20px;
                                    ">
                                        <strong>No compartas este c√≥digo</strong> con nadie, ni siquiera con nuestro equipo de soporte
                                    </p>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                
                <tr>
                    <td style="padding: 8px 0;">
                        <table border="0" cellpadding="0" cellspacing="0" width="100%">
                            <tr>
                                <td style="width: 20px; vertical-align: top; padding-right: 10px;">
                                    <span style="font-size: 14px;">‚ö†Ô∏è</span>
                                </td>
                                <td style="vertical-align: top;">
                                    <p style="
                                        margin: 0;
                                        padding: 0;
                                        font-family: Arial, sans-serif;
                                        font-size: 14px;
                                        color: #333333;
                                        line-height: 20px;
                                    ">
                                        <strong>√ösalo solo en el sitio oficial</strong> de {{appName}}
                                    </p>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                
                <tr>
                    <td style="padding: 8px 0;">
                        <table border="0" cellpadding="0" cellspacing="0" width="100%">
                            <tr>
                                <td style="width: 20px; vertical-align: top; padding-right: 10px;">
                                    <span style="font-size: 14px;">‚úÖ</span>
                                </td>
                                <td style="vertical-align: top;">
                                    <p style="
                                        margin: 0;
                                        padding: 0;
                                        font-family: Arial, sans-serif;
                                        font-size: 14px;
                                        color: #333333;
                                        line-height: 20px;
                                    ">
                                        Crea una contrase√±a fuerte con al menos 8 caracteres
                                    </p>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                
                <tr>
                    <td style="padding: 8px 0;">
                        <table border="0" cellpadding="0" cellspacing="0" width="100%">
                            <tr>
                                <td style="width: 20px; vertical-align: top; padding-right: 10px;">
                                    <span style="font-size: 14px;">‚úÖ</span>
                                </td>
                                <td style="vertical-align: top;">
                                    <p style="
                                        margin: 0;
                                        padding: 0;
                                        font-family: Arial, sans-serif;
                                        font-size: 14px;
                                        color: #333333;
                                        line-height: 20px;
                                    ">
                                        Incluye may√∫sculas, min√∫sculas, n√∫meros y s√≠mbolos
                                    </p>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                
                <tr>
                    <td style="padding: 8px 0;">
                        <table border="0" cellpadding="0" cellspacing="0" width="100%">
                            <tr>
                                <td style="width: 20px; vertical-align: top; padding-right: 10px;">
                                    <span style="font-size: 14px;">‚úÖ</span>
                                </td>
                                <td style="vertical-align: top;">
                                    <p style="
                                        margin: 0;
                                        padding: 0;
                                        font-family: Arial, sans-serif;
                                        font-size: 14px;
                                        color: #333333;
                                        line-height: 20px;
                                    ">
                                        No uses la misma contrase√±a en otras cuentas
                                    </p>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<!-- Alerta de seguridad -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td style="padding: 20px 0;">
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tr>
                    <td style="
                        background-color: #f8d7da;
                        border-left: 4px solid #dc3545;
                        padding: 20px;
                        border-radius: 4px;
                    ">
                        <h4 style="
                            margin: 0 0 10px 0;
                            padding: 0;
                            font-family: Arial, sans-serif;
                            font-size: 16px;
                            font-weight: bold;
                            color: #721c24;
                        ">
                            üö® ¬øNo solicitaste este c√≥digo?
                        </h4>
                        
                        <p style="
                            margin: 0 0 15px 0;
                            padding: 0;
                            font-family: Arial, sans-serif;
                            font-size: 14px;
                            color: #721c24;
                            line-height: 20px;
                        ">
                            Si no solicitaste restablecer tu contrase√±a, <strong>ignora este email</strong>. 
                            Tu contrase√±a actual permanecer√° sin cambios y el c√≥digo expirar√° autom√°ticamente.
                        </p>
                        
                        <p style="
                            margin: 0;
                            padding: 0;
                            font-family: Arial, sans-serif;
                            font-size: 14px;
                            color: #721c24;
                            line-height: 20px;
                        ">
                            Si recibes m√∫ltiples c√≥digos sin haberlos solicitado, contacta inmediatamente a nuestro 
                            equipo de soporte, ya que podr√≠a indicar que alguien est√° intentando acceder a tu cuenta.
                        </p>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<!-- Bot√≥n de contacto de soporte -->
{{#if supportEmail}}
<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td style="padding: 20px 0;" align="center">
            <p style="
                margin: 0 0 15px 0;
                padding: 0;
                font-family: Arial, sans-serif;
                font-size: 14px;
                color: #6c757d;
                text-align: center;
            ">
                ¬øEl c√≥digo no funciona o necesitas ayuda?
            </p>
            
            {{> button 
                url="mailto:{{supportEmail}}"
                text="üìß Contactar soporte"
                backgroundColor="#6c757d"
                textColor="#ffffff"
                width="200"
                height="45"
                fontSize="14"
                fontWeight="bold"
                borderRadius="6"
                margin="5px 0"
            }}
        </td>
    </tr>
</table>
{{/if}}

<!-- Informaci√≥n adicional sobre c√≥digos -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td style="padding: 20px 0;">
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tr>
                    <td style="
                        background-color: #e8f5e8;
                        border-left: 4px solid #28a745;
                        padding: 15px 20px;
                        border-radius: 4px;
                    ">
                        <h5 style="
                            margin: 0 0 8px 0;
                            padding: 0;
                            font-family: Arial, sans-serif;
                            font-size: 14px;
                            font-weight: bold;
                            color: #155724;
                        ">
                            üí° ¬øSab√≠as que...?
                        </h5>
                        
                        <p style="
                            margin: 0;
                            padding: 0;
                            font-family: Arial, sans-serif;
                            font-size: 13px;
                            color: #155724;
                            line-height: 18px;
                        ">
                            Cada c√≥digo es √∫nico y solo puede ser usado una vez. Una vez que restablezas tu contrase√±a 
                            exitosamente, este c√≥digo quedar√° inv√°lido autom√°ticamente, incluso si no ha expirado.
                        </p>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<!-- Mensaje de cierre -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td style="padding: 30px 0 20px 0;">
            <p style="
                margin: 0;
                padding: 0;
                font-family: Arial, sans-serif;
                font-size: 16px;
                color: #333333;
                line-height: 24px;
            ">
                Gracias por mantener tu cuenta segura. Recuerda que la seguridad de tu cuenta es muy importante 
                para nosotros, y por eso implementamos estas medidas de protecci√≥n.
            </p>
        </td>
    </tr>
</table>

<!-- Firma -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td>
            <p style="
                margin: 0;
                padding: 0;
                font-family: Arial, sans-serif;
                font-size: 16px;
                color: #333333;
                line-height: 24px;
            ">
                {{#if signature}}
                    {{{signature}}}
                {{else}}
                    Saludos cordiales,<br>
                    <strong>El equipo de seguridad de {{appName}} üîê</strong>
                {{/if}}
            </p>
            
            {{#if timestamp}}
            <p style="
                margin: 20px 0 0 0;
                padding: 0;
                font-family: Arial, sans-serif;
                font-size: 12px;
                color: #999999;
            ">
                üìÖ Email enviado el {{timestamp}}
            </p>
            {{/if}}
        </td>
    </tr>
</table>